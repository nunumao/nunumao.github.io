<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>编程日记</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
  
<link rel="stylesheet" href="/css/github-markdown.css">

  
<link rel="stylesheet" href="/css/atom-one-dark.css">

  <script src="https://cdn.tailwindcss.com"></script>
  
<script src="/js/jquery.min.js"></script>

  
<script src="/js/script.js"></script>

<meta name="generator" content="Hexo 7.3.0"></head>

<body class="bg-gray-50 text-gray-800">
  <div class="lg:hidden fixed right-4 top-4 z-50">
    <button class="p-2 bg-white/80 backdrop-blur-sm rounded-lg border" data-mobile-menu-trigger><i class="fas fa-bars"></i></button>
  </div>
  <!-- 导航栏 -->
  <nav class="border-b bg-white/80 backdrop-blur-sm sticky top-0 z-40">
    <div class="max-w-5xl mx-auto px-4">
      <div class="flex justify-between items-center h-16">
        <a href="/" class="text-xl font-serif">编程日记</a>
        <!-- 桌面端导航 -->
        <div class="hidden lg:flex items-center space-x-6">
          <div class="flex items-center space-x-6 text-sm">
            <a href="/" class="hover:text-blue-600" data-i18n="nav.home">首页</a>
            <!-- 分类下拉菜单 -->
            <div class="relative group">
              <a href="/categories" class="hover:text-blue-600">分类</a>
              <!-- 优化后的下拉内容 -->
              <div class="absolute left-0 mt-2 py-2 bg-white backdrop-blur-sm border rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
                <div class="grid grid-cols-2 gap-1 w-[400px] p-4">
                  
                    
                      
                        <a class="flex items-center space-x-2 p-2 rounded-lg hover:bg-blue-50" href="/categories/前端技术/">
                          <i class="fas fa-code text-blue-500"></i>
                          <span>前端技术</span>
                        </a>
                      
                    
                      
                        <a class="flex items-center space-x-2 p-2 rounded-lg hover:bg-blue-50" href="/categories/服务器/">
                          <i class="fas fa-code text-blue-500"></i>
                          <span>服务器</span>
                        </a>
                      
                    
                      
                    
                      
                        <a class="flex items-center space-x-2 p-2 rounded-lg hover:bg-blue-50" href="/categories/后端技术/">
                          <i class="fas fa-code text-blue-500"></i>
                          <span>后端技术</span>
                        </a>
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                  
                </div>
              </div>
            </div>
            <a href="/case" class="hover:text-blue-600" data-i18n="nav.case">作品</a>
            <a href="/archives" class="hover:text-blue-600" data-i18n="nav.archives">归档</a>
            <a href="/about" class="hover:text-blue-600" data-i18n="nav.about">关于</a>
            <!-- 搜索框 -->
            <div class="relative">
              <input type="search" placeholder="Search articles..." class="w-48 px-4 py-1 text-sm border rounded-full bg-gray-50 focus:outline-none focus:ring-1 focus:ring-blue-500">
              <i class="fas fa-search absolute right-3 top-2 text-gray-400"></i>
            </div>
            <!-- 语言切换 -->
            <div class="flex items-center space-x-2 ml-4 text-sm border-l pl-4">
              <button class="lang-switch hover:text-blue-600" @click="changeLang('en-US')">EN</button>
              <span class="text-gray-300">|</span>
              <button class="lang-switch hover:text-blue-600" @click="changeLang('zh-CN')">简</button>
              <span class="text-gray-300">|</span>
              <button class="lang-switch hover:text-blue-600" @click="changeLang('zh-TW')">繁</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </nav>
  <div id="mobileMenu" class="fixed inset-0 bg-white/90 backdrop-blur-sm z-40 lg:hidden hidden">
    <div class="h-full w-full flex flex-col items-center justify-center space-y-6 text-lg">
      <a href="/" class="hover:text-blue-600" data-i18n="nav.home">首页</a>
      <a href="/categories" class="hover:text-blue-600" data-i18n="nav.categories">分类</a>
      <a href="/case" class="hover:text-blue-600" data-i18n="nav.case">作品</a>
      <a href="/archives" class="hover:text-blue-600" data-i18n="nav.archive">归档</a>
      <a href="/about" class="hover:text-blue-600" data-i18n="nav.about">关于</a>
      <div class="flex items-center space-x-4 mt-4">
        <button class="lang-switch hover:text-blue-600" data-lang="en">EN</button>
        <button class="lang-switch hover:text-blue-600" data-lang="zh">简</button>
        <button class="lang-switch hover:text-blue-600" data-lang="zh-TW">繁</button>
      </div>
    </div>
  </div>
  <main class="max-w-5xl mx-auto px-4 py-12">
  <div class="lg:flex lg:gap-8">
    <!-- 文章主体 -->
    <article class="lg:w-3/4">
      <!-- 文章容器 -->
      <div class="bg-white rounded-xl overflow-hidden">
        <!-- 文章头部 -->
        <div class="px-8 pt-12 pb-8">
          <!-- 标题 -->
          <h1 class="text-3xl font-medium mb-6 leading-snug">
            Kotlin (十) | 数据类和密封类
          </h1>

          <!-- 元信息 -->
          <div class="flex flex-wrap items-center gap-6 text-sm text-gray-500">
            <span>
              <i class="fas fa-folder-open mr-2"></i>
              
                <a href="/categories/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/KOTLIN/" class="hover:text-blue-600">
                  KOTLIN
                </a>
                
            </span>
            <span>
              <i class="far fa-calendar mr-2"></i>
              2025-02-10
            </span>
            <span><i class="far fa-clock mr-2"></i>15 分钟阅读</span>
            <span><i class="far fa-eye mr-2"></i>
              0
            </span>
          </div>
        </div>

        <!-- 文章内容 -->
        <div class="px-8 py-10 border-t border-b">
          <div class="markdown-body">
            <p><strong>数据类和密封类 (Data Classes and Sealed Classes)</strong></p>
<p>数据类 (Data Classes) 和密封类 (Sealed Classes) 是 Kotlin 中两种非常有用的特殊类，它们分别用于不同的目的，但在某些场景下可以结合使用，提供更强大的功能。</p>
<p><strong>数据类 (Data Classes)</strong></p>
<p>我们在第五章已经初步介绍了数据类。 数据类主要用于简洁地创建用于存储数据的类。 Kotlin 编译器会自动为数据类生成一些常用的方法，从而减少 boilerplate 代码，提高开发效率。 让我们更深入地了解数据类的特性。</p>
<ul>
<li><p><strong>自动生成的方法:</strong>  当使用 <code>data</code> 关键字声明类时，Kotlin 编译器会自动生成以下成员：</p>
<ol>
<li><p><strong><code>equals() / hashCode()</code>:</strong>  用于比较对象是否相等。  基于主构造函数的所有属性进行比较。  这意味着如果两个数据类的对象的所有主构造函数属性值都相同，则它们被认为是相等的。 <code>hashCode()</code> 方法也会基于主构造函数属性生成哈希码，用于在哈希集合 (例如 <code>HashSet</code>, <code>HashMap</code>) 中使用。</p>
</li>
<li><p><strong><code>toString()</code>:</strong>  返回对象的字符串表示形式，格式为 <code>ClassName(property1=value1, property2=value2, ...)</code>，方便打印和调试。</p>
</li>
<li><p><strong><code>copy()</code>:</strong>  生成一个新的对象，新对象的值与原对象相同，但可以选择性地修改部分属性的值。  <code>copy()</code> 方法为每个主构造函数参数生成一个默认参数，允许你只修改需要改变的属性。</p>
</li>
<li><p><strong><code>componentN()</code> 函数:</strong>  为每个主构造函数参数生成一个 <code>componentN()</code> 函数 (例如 <code>component1()</code>, <code>component2()</code>, …)，用于<strong>解构 (destructuring)</strong> 数据类对象。  解构允许你将数据类对象的属性值同时赋值给多个变量。</p>
</li>
</ol>
</li>
<li><p><strong>数据类示例 (回顾和扩展):</strong></p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">data</span> <span class="keyword">class</span> <span class="title class_">User</span>(<span class="keyword">val</span> name: String, <span class="keyword">val</span> age: <span class="built_in">Int</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> user1 = User(<span class="string">&quot;Alice&quot;</span>, <span class="number">30</span>)</span><br><span class="line">    <span class="keyword">val</span> user2 = User(<span class="string">&quot;Alice&quot;</span>, <span class="number">30</span>)</span><br><span class="line">    <span class="keyword">val</span> user3 = User(<span class="string">&quot;Bob&quot;</span>, <span class="number">25</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// equals() 和 hashCode() 自动生成</span></span><br><span class="line">    println(<span class="string">&quot;user1 == user2: <span class="subst">$&#123;user1 == user2&#125;</span>&quot;</span>) <span class="comment">// 输出: user1 == user2: true (内容相等)</span></span><br><span class="line">    println(<span class="string">&quot;user1 === user2: <span class="subst">$&#123;user1 === user2&#125;</span>&quot;</span>) <span class="comment">// 输出: user1 === user2: false (引用不相等，是不同的对象)</span></span><br><span class="line">    println(<span class="string">&quot;user1 == user3: <span class="subst">$&#123;user1 == user3&#125;</span>&quot;</span>) <span class="comment">// 输出: user1 == user3: false (内容不相等)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> usersSet = HashSet&lt;User&gt;()</span><br><span class="line">    usersSet.add(user1)</span><br><span class="line">    usersSet.add(user2) <span class="comment">// user2 内容与 user1 相同，Set 中只会保留一个</span></span><br><span class="line">    usersSet.add(user3)</span><br><span class="line">    println(<span class="string">&quot;Users in Set: <span class="variable">$usersSet</span>&quot;</span>) <span class="comment">// 输出: Users in Set: [User(name=Alice, age=30), User(name=Bob, age=25)] (Set 中去重)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// toString() 自动生成</span></span><br><span class="line">    println(<span class="string">&quot;User1: <span class="variable">$user1</span>&quot;</span>) <span class="comment">// 输出: User1: User(name=Alice, age=30)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// copy() 自动生成</span></span><br><span class="line">    <span class="keyword">val</span> user4 = user1.copy(age = <span class="number">31</span>) <span class="comment">// 复制 user1，只修改 age 属性</span></span><br><span class="line">    println(<span class="string">&quot;User4 (copied from user1, age modified): <span class="variable">$user4</span>&quot;</span>) <span class="comment">// 输出: User4 (copied from user1, age modified): User(name=Alice, age=31)</span></span><br><span class="line">    <span class="keyword">val</span> user5 = user1.copy() <span class="comment">// 完全复制 user1，不修改任何属性</span></span><br><span class="line">    println(<span class="string">&quot;User5 (copied from user1): <span class="variable">$user5</span>&quot;</span>) <span class="comment">// 输出: User5 (copied from user1): User(name=Alice, age=30)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// componentN() 和解构声明</span></span><br><span class="line">    <span class="keyword">val</span> (name, age) = user1 <span class="comment">// 解构 user1 对象，将 name 和 age 属性分别赋值给 name 和 age 变量</span></span><br><span class="line">    println(<span class="string">&quot;Name: <span class="variable">$name</span>, Age: <span class="variable">$age</span>&quot;</span>) <span class="comment">// 输出: Name: Alice, Age: 30</span></span><br><span class="line">    println(<span class="string">&quot;Name from component1(): <span class="subst">$&#123;user1.component1()&#125;</span>&quot;</span>) <span class="comment">// 输出: Name from component1(): Alice</span></span><br><span class="line">    println(<span class="string">&quot;Age from component2(): <span class="subst">$&#123;user1.component2()&#125;</span>&quot;</span>) <span class="comment">// 输出: Age from component2(): 30</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>数据类的限制和规则:</strong></p>
<ul>
<li><strong>主构造函数:</strong>  数据类必须有一个主构造函数，并且主构造函数至少需要有一个参数。</li>
<li><strong>主构造函数参数必须是 <code>val</code> 或 <code>var</code>:</strong>  主构造函数参数必须声明为 <code>val</code> (不可变属性) 或 <code>var</code> (可变属性)。</li>
<li><strong>数据类不能是 <code>abstract</code>, <code>open</code>, <code>sealed</code>, <code>inner</code>:</strong>  数据类不能是抽象类、开放类、密封类或内部类。</li>
<li><strong>数据类可以继承类，实现接口:</strong>  数据类可以继承其他类 (但被继承的类必须是 <code>open</code> 的)，也可以实现一个或多个接口。</li>
</ul>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="comment">// data class AbstractDataClass(val value: Int) // 错误：数据类不能是 abstract</span></span><br><span class="line"><span class="comment">// open data class OpenDataClass(val value: Int) // 错误：数据类不能是 open</span></span><br><span class="line"><span class="comment">// sealed data class SealedDataClass(val value: Int) // 错误：数据类不能是 sealed</span></span><br><span class="line"><span class="comment">// inner data class InnerDataClass(val value: Int) // 错误：数据类不能是 inner</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">open</span> <span class="keyword">class</span> <span class="title class_">BaseClass</span>(<span class="keyword">open</span> <span class="keyword">val</span> baseProperty: String) <span class="comment">// 基类需要是 open 的才能被继承</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">MyInterface</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">data</span> <span class="keyword">class</span> <span class="title class_">DerivedDataClass</span>(<span class="keyword">override</span> <span class="keyword">val</span> baseProperty: String, <span class="keyword">val</span> dataProperty: <span class="built_in">Int</span>) : BaseClass(baseProperty), MyInterface &#123;</span><br><span class="line">    <span class="comment">// 可以继承类和实现接口，但需要注意基类和接口的规则</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>数据类的用途:</strong></p>
<ul>
<li><strong>数据传输对象 (DTOs):</strong>  用于在不同层之间或不同系统之间传输数据。</li>
<li><strong>实体类 (Entities):</strong>  用于表示应用程序中的实体对象，例如用户、产品、订单等。</li>
<li><strong>POJOs&#x2F;POCOs:</strong>  简单的 Java 对象&#x2F;Plain Old CLR Objects，用于存储数据。</li>
<li><strong>函数式编程中的不可变数据结构:</strong>  数据类的 <code>copy()</code> 方法非常适合创建不可变数据结构的副本，并进行修改，符合函数式编程的思想。</li>
</ul>
</li>
</ul>
<p><strong>密封类 (Sealed Classes)</strong></p>
<p>密封类 (Sealed Classes) 用于表示<strong>受限的类继承结构</strong>。  密封类的所有子类都必须在<strong>同一个文件中声明</strong>。  密封类的主要目的是为了在 <code>when</code> 表达式中进行<strong>穷举匹配</strong>，编译器可以确保你处理了所有可能的子类情况，从而提高代码的安全性和可完备性。</p>
<ul>
<li><p><strong><code>sealed class</code> 的特点:</strong></p>
<ol>
<li><p><strong>受限的继承结构:</strong>  密封类的子类必须与密封类在同一个文件中定义。  这意味着你可以在定义密封类的文件中完全掌握它的所有子类。</p>
</li>
<li><p><strong>穷举 <code>when</code> 表达式:</strong>  当对密封类或其子类的实例使用 <code>when</code> 表达式时，如果 <code>when</code> 表达式覆盖了密封类的所有子类，则可以<strong>省略 <code>else</code> 分支</strong>，因为编译器知道所有可能的情况都已被处理。  如果遗漏了任何子类，编译器会发出警告，提示 <code>when</code> 表达式不完备。</p>
</li>
<li><p><strong>抽象类特性:</strong>  密封类本身是抽象的，不能直接实例化。  但它可以有抽象成员和非抽象成员。</p>
</li>
<li><p><strong>子类可以是多种类型:</strong>  密封类的子类可以是 <code>data class</code>, <code>object</code>, <code>class</code> (普通类), 甚至可以是其他的 <code>sealed class</code> (嵌套密封类)。</p>
</li>
</ol>
</li>
<li><p><strong><code>sealed class</code> 的语法:</strong></p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">sealed</span> <span class="keyword">class</span> 密封类名 &#123;</span><br><span class="line">    <span class="comment">// 密封类的子类定义 (必须在同一个文件中)</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子类定义 (必须在同一个文件中，可以直接定义在 sealed class 内部或外部)</span></span><br><span class="line"><span class="keyword">data</span> <span class="keyword">class</span> 子类<span class="number">1</span>(...) : 密封类名()</span><br><span class="line"><span class="keyword">object</span> 子类<span class="number">2</span> : 密封类名()</span><br><span class="line"><span class="keyword">class</span> 子类<span class="number">3</span>(...) : 密封类名()</span><br><span class="line"><span class="keyword">sealed</span> <span class="keyword">class</span> 子密封类 : 密封类名() <span class="comment">// 嵌套密封类</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>sealed class</code> 示例:</strong>  表示网络请求的结果状态。</p>
  <figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">sealed</span> <span class="keyword">class</span> <span class="title class_">NetworkResult</span> &#123;</span><br><span class="line">    <span class="keyword">data</span> <span class="keyword">class</span> <span class="title class_">Success</span>(<span class="keyword">val</span> <span class="keyword">data</span>: Any?) : NetworkResult() <span class="comment">// 请求成功，携带数据</span></span><br><span class="line">    <span class="keyword">data</span> <span class="keyword">class</span> <span class="title class_">Error</span>(<span class="keyword">val</span> exception: Exception) : NetworkResult() <span class="comment">// 请求失败，携带异常信息</span></span><br><span class="line">    <span class="keyword">object</span> Loading : NetworkResult() <span class="comment">// 请求加载中状态</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">handleNetworkResult</span><span class="params">(result: <span class="type">NetworkResult</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">when</span> (result) &#123;</span><br><span class="line">        <span class="keyword">is</span> NetworkResult.Success -&gt; &#123;</span><br><span class="line">            println(<span class="string">&quot;请求成功，数据：<span class="subst">$&#123;result.data&#125;</span>&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">is</span> NetworkResult.Error -&gt; &#123;</span><br><span class="line">            println(<span class="string">&quot;请求失败，异常：<span class="subst">$&#123;result.exception&#125;</span>&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">is</span> NetworkResult.Loading -&gt; &#123;</span><br><span class="line">            println(<span class="string">&quot;加载中...&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// else 分支可以省略，因为 when 表达式已经覆盖了 NetworkResult 的所有子类</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    handleNetworkResult(NetworkResult.Loading)</span><br><span class="line">    handleNetworkResult(NetworkResult.Success(<span class="string">&quot;用户数据&quot;</span>))</span><br><span class="line">    handleNetworkResult(NetworkResult.Error(IOException(<span class="string">&quot;网络连接错误&quot;</span>)))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>sealed class</code> 的用途:</strong></p>
<ul>
<li><strong>状态机 (State Machines):</strong>  表示有限状态机的各种状态。  例如 UI 界面的加载状态、数据处理的不同阶段。</li>
<li><strong>代数数据类型 (Algebraic Data Types, ADTs):</strong>  用于构建复杂的数据结构，表示 “和类型 (sum type)” 或 “标记联合 (tagged union)”。  例如 <code>Option</code> 类型 (表示 “有值” 或 “无值”)，<code>Either</code> 类型 (表示 “成功” 或 “失败”)，<code>Result</code> 类型 (表示 “结果” 或 “错误”)。</li>
<li><strong>错误处理:</strong>  表示不同类型的错误，例如网络错误、文件操作错误、输入验证错误等。</li>
<li><strong>UI 事件:</strong>  表示用户界面的各种事件，例如点击事件、触摸事件、键盘事件等。</li>
</ul>
</li>
</ul>
<p><strong><code>when</code> 表达式与密封类的结合</strong></p>
<p><code>when</code> 表达式与密封类是天生一对。  <code>when</code> 表达式可以对密封类的实例进行类型匹配，并且编译器可以确保 <code>when</code> 表达式的完备性。  这使得使用 <code>when</code> 表达式处理密封类非常安全和方便。</p>
<p><strong>例子 (回顾 11.2 中的 <code>NetworkResult</code> 示例):</strong></p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">handleNetworkResult</span><span class="params">(result: <span class="type">NetworkResult</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">when</span> (result) &#123;</span><br><span class="line">        <span class="keyword">is</span> NetworkResult.Success -&gt; &#123;</span><br><span class="line">            println(<span class="string">&quot;请求成功，数据：<span class="subst">$&#123;result.data&#125;</span>&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">is</span> NetworkResult.Error -&gt; &#123;</span><br><span class="line">            println(<span class="string">&quot;请求失败，异常：<span class="subst">$&#123;result.exception&#125;</span>&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">is</span> NetworkResult.Loading -&gt; &#123;</span><br><span class="line">            println(<span class="string">&quot;加载中...&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// else 分支可以省略，因为 when 表达式已经覆盖了 NetworkResult 的所有子类</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果我们在 <code>NetworkResult</code> 密封类中添加一个新的子类，例如 <code>NetworkResult.Unauthorized</code>，编译器会立即在所有使用 <code>when</code> 表达式处理 <code>NetworkResult</code> 的地方发出警告，提示 <code>when</code> 表达式缺少对 <code>NetworkResult.Unauthorized</code> 的处理分支。  这可以帮助开发者及时发现并处理新的状态，避免遗漏情况导致错误。</p>
<p><strong>数据类 vs. 密封类 (对比)</strong></p>
<table>
<thead>
<tr>
<th>特性</th>
<th>数据类 (<code>data class</code>)</th>
<th>密封类 (<code>sealed class</code>)</th>
</tr>
</thead>
<tbody><tr>
<td>主要目的</td>
<td>简洁地存储数据</td>
<td>表示受限的类继承结构，实现穷举匹配</td>
</tr>
<tr>
<td>自动生成方法</td>
<td><code>equals()</code>, <code>hashCode()</code>, <code>toString()</code>, <code>copy()</code>, <code>componentN()</code></td>
<td>无自动生成方法 (但通常子类会是 data class 或 object，会自动生成)</td>
</tr>
<tr>
<td>继承</td>
<td>可以继承类，实现接口</td>
<td>自身是抽象类，可以被继承，子类必须在同一文件中定义</td>
</tr>
<tr>
<td>实例化</td>
<td>可以实例化</td>
<td>不能直接实例化 (抽象类)</td>
</tr>
<tr>
<td><code>when</code> 表达式</td>
<td>可以用于 <code>when</code> 表达式，但没有穷举匹配的优势</td>
<td>特别适合与 <code>when</code> 表达式结合使用，实现穷举匹配，编译器辅助完备性检查</td>
</tr>
<tr>
<td>适用场景</td>
<td>数据传输对象，实体类，简单的数据容器</td>
<td>状态机，代数数据类型，错误处理，UI 事件</td>
</tr>
</tbody></table>
<p><strong>总结:</strong></p>
<ul>
<li><strong>数据类</strong> 主要用于数据建模，简洁地表示数据对象，自动生成常用方法方便数据操作。</li>
<li><strong>密封类</strong> 主要用于类型建模，表示一组有限的、相关的类型，与 <code>when</code> 表达式结合使用实现安全的穷举匹配。</li>
</ul>
<p>在实际开发中，数据类和密封类经常一起使用。  例如，密封类的子类可以是数据类，用于表示不同状态的数据，结合 <code>when</code> 表达式可以优雅地处理不同状态的情况。</p>

          </div>
        </div>

        <!-- 文章底部 -->
        <div class="px-8 py-8">
          <!-- 标签 -->
          
            <div class="flex flex-wrap gap-2 mb-8">
              
                <a href="/tags/KOTLIN/" class="px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-full text-sm text-gray-600 transition-colors">
                  KOTLIN
                </a>
                
            </div>
            

              <!-- 分享 -->
              <div class="flex items-center justify-between mb-8 py-6 border-t border-b">
                <div class="text-sm text-gray-500">分享文章：</div>
                <div class="flex gap-4">
                  <button class="text-gray-400 hover:text-gray-600 transition-colors">
                    <i class="far fa-copy text-xl"></i>
                  </button>
                </div>
              </div>

              <!-- 上一篇/下一篇 -->
              <div class="flex flex-col sm:flex-row justify-between gap-4">
                
                  <a href="/cm72nkaxc000uwkwt5i32h51y.html" class="group flex-1">
                    <div class="text-sm text-gray-500 mb-1">上一篇</div>
                    <div class="group-hover:text-blue-600 transition-colors">
                      Kotlin (十一) | 泛型
                    </div>
                  </a>
                  
                    
                      <a href="/cm72nkaxc000zwkwt6lim9wdz.html" class="group flex-1 text-right">
                        <div class="text-sm text-gray-500 mb-1">下一篇</div>
                        <div class="group-hover:text-blue-600 transition-colors">
                          Kotlin (六) | 接口
                        </div>
                      </a>
                      
              </div>
        </div>
      </div>
    </article>

    <!-- 侧边栏 -->
    <aside class="lg:w-1/4 mt-8 lg:mt-0 space-y-6">
      <!-- 作者信息 -->
      <div class="bg-white rounded-xl p-6">
        <div class="flex items-center gap-4 mb-4">
          <img src="/images/avatar.jpg" class="w-16 h-16 rounded-full">
          <div>
            <h3 class="font-medium">Nunumao</h3>
            <p class="text-sm text-gray-500">开发工程师</p>
          </div>
        </div>
        <p class="text-sm text-gray-600 mb-4">专注于技术研究，热爱分享技术心得</p>
        <div class="flex justify-center gap-4">
          <a href="https://github.com/nunumao" target="_blank" class="text-gray-400 hover:text-gray-600">
            <i class="fab fa-github text-xl"></i>
          </a>
          <a href="mailto:gm292018748@email.com" target="_blank" class="text-gray-400 hover:text-[#1DA1F2]">
            <i class="fas fa-envelope text-xl"></i>
          </a>
        </div>
      </div>

      <!-- 目录 -->
      <div class="bg-white rounded-xl p-6 sticky top-24">
        <h2 class="text-lg font-medium mb-4">目录</h2>
        <nav class="space-y-2 text-sm">
          
        </nav>
      </div>

      <!-- 分类列表 -->
      <div class="bg-white rounded-xl p-6">
        <h2 class="text-lg font-medium mb-4">文章分类</h2>
        <div class="space-y-3">
          
            <a href="/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/" class="flex items-center justify-between group">
              <div class="flex items-center">
                <i class="fas fa-code text-blue-500 w-5"></i>
                <span class="text-sm group-hover:text-blue-600">
                  前端技术
                </span>
              </div>
              <span class="text-xs text-gray-500">
                1
              </span>
            </a>
            
            <a href="/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="flex items-center justify-between group">
              <div class="flex items-center">
                <i class="fas fa-folder text-gray-500 w-5"></i>
                <span class="text-sm group-hover:text-blue-600">
                  服务器
                </span>
              </div>
              <span class="text-xs text-gray-500">
                3
              </span>
            </a>
            
            <a href="/categories/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/" class="flex items-center justify-between group">
              <div class="flex items-center">
                <i class="fas fa-server text-green-500 w-5"></i>
                <span class="text-sm group-hover:text-blue-600">
                  后端技术
                </span>
              </div>
              <span class="text-xs text-gray-500">
                31
              </span>
            </a>
            
        </div>
      </div>

      <!-- 相关文章 -->
      <div class="bg-white rounded-xl p-6">
        <h2 class="text-lg font-medium mb-4">相关文章</h2>
        <div class="space-y-4">
          
            <a href="/cm72nkaxe001awkwtc6bdgyhu.html" class="block group">
              <h3 class="text-sm font-medium group-hover:text-blue-600 line-clamp-2">
                Hello World
              </h3>
              <p class="text-xs text-gray-500 mt-1">2025-02-13</p>
            </a>
            
            <a href="/cm72nkax6000bwkwt554c1z0e.html" class="block group">
              <h3 class="text-sm font-medium group-hover:text-blue-600 line-clamp-2">
                Kotlin (一) | 基本语法
              </h3>
              <p class="text-xs text-gray-500 mt-1">2025-02-10</p>
            </a>
            
            <a href="/cm72nkax7000ewkwt2l4293ed.html" class="block group">
              <h3 class="text-sm font-medium group-hover:text-blue-600 line-clamp-2">
                Kotlin (三) | 函数
              </h3>
              <p class="text-xs text-gray-500 mt-1">2025-02-10</p>
            </a>
            
            <a href="/cm72nkax7000hwkwt7pw007e6.html" class="block group">
              <h3 class="text-sm font-medium group-hover:text-blue-600 line-clamp-2">
                Kotlin (七) | 集合
              </h3>
              <p class="text-xs text-gray-500 mt-1">2025-02-10</p>
            </a>
            
            <a href="/cm72nkax9000jwkwtccbg0esu.html" class="block group">
              <h3 class="text-sm font-medium group-hover:text-blue-600 line-clamp-2">
                Kotlin (二) | 控制流
              </h3>
              <p class="text-xs text-gray-500 mt-1">2025-02-10</p>
            </a>
            
        </div>
      </div>
    </aside>
  </div>
</main>

<style>
  .markdown-body {
    box-sizing: border-box;
    min-width: 200px;
    max-width: 100%;
    margin: 0 auto;
    background-color: white;
  }

  /* 适配深色模式 */
  @media (prefers-color-scheme: dark) {
    .markdown-body {
      color-scheme: dark;
      --color-prettylights-syntax-comment: #8b949e;
      --color-prettylights-syntax-constant: #79c0ff;
      --color-prettylights-syntax-entity: #d2a8ff;
      --color-prettylights-syntax-storage-modifier-import: #c9d1d9;
      --color-prettylights-syntax-entity-tag: #7ee787;
      --color-prettylights-syntax-keyword: #ff7b72;
      --color-prettylights-syntax-string: #a5d6ff;
      --color-prettylights-syntax-variable: #ffa657;
      --color-prettylights-syntax-brackethighlighter-unmatched: #f85149;
      --color-prettylights-syntax-invalid-illegal-text: #f0f6fc;
      --color-prettylights-syntax-invalid-illegal-bg: #8e1519;
      --color-prettylights-syntax-carriage-return-text: #f0f6fc;
      --color-prettylights-syntax-carriage-return-bg: #b62324;
      --color-prettylights-syntax-string-regexp: #7ee787;
      --color-prettylights-syntax-markup-list: #f2cc60;
      --color-prettylights-syntax-markup-heading: #1f6feb;
      --color-prettylights-syntax-markup-italic: #c9d1d9;
      --color-prettylights-syntax-markup-bold: #c9d1d9;
      --color-prettylights-syntax-markup-deleted-text: #ffdcd7;
      --color-prettylights-syntax-markup-deleted-bg: #67060c;
      --color-prettylights-syntax-markup-inserted-text: #aff5b4;
      --color-prettylights-syntax-markup-inserted-bg: #033a16;
      --color-prettylights-syntax-markup-changed-text: #ffdfb6;
      --color-prettylights-syntax-markup-changed-bg: #5a1e02;
      --color-prettylights-syntax-markup-ignored-text: #c9d1d9;
      --color-prettylights-syntax-markup-ignored-bg: #1158c7;
      --color-prettylights-syntax-meta-diff-range: #d2a8ff;
      --color-prettylights-syntax-brackethighlighter-angle: #8b949e;
      --color-prettylights-syntax-sublimelinter-gutter-mark: #484f58;
      --color-prettylights-syntax-constant-other-reference-link: #a5d6ff;
      --color-fg-default: #c9d1d9;
      --color-fg-muted: #8b949e;
      --color-fg-subtle: #6e7681;
      --color-canvas-default: #0d1117;
      --color-canvas-subtle: #161b22;
      --color-border-default: #30363d;
      --color-border-muted: #21262d;
      --color-neutral-muted: rgba(110, 118, 129, 0.4);
      --color-accent-fg: #58a6ff;
      --color-accent-emphasis: #1f6feb;
      --color-attention-subtle: rgba(187, 128, 9, 0.15);
      --color-danger-fg: #f85149;
    }
  }
</style>
  <!-- 页脚 -->
<footer class="border-t mt-16">
  <div class="max-w-4xl mx-auto px-4 py-8 text-center text-sm text-gray-500">
    <p>© 2025 nunumao. Built with <a href="#" class="text-blue-600">Hexo</a></p>
  </div>
</footer>
</body>

</html>